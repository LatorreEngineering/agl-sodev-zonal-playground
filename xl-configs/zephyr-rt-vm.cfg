```python
# AGL SoDeV - Zephyr RT VM Configuration
# Dom0less guest for real-time CAN simulation

# Basic VM settings
name = "zephyr-rt-vm"
type = "pvh"
kernel = "/usr/local/share/agl-sodev/images/zephyr-rt.bin"

# No root filesystem (bare-metal Zephyr)
ramdisk = ""

# Boot parameters (Zephyr doesn't need cmdline)
cmdline = ""

# Memory allocation (32MB - minimal for RTOS)
memory = 32
maxmem = 32

# Virtual CPUs (pinned for real-time)
vcpus = 2
cpus = "6-7"  # Isolated cores for RT workload

# CPU pinning (enforced at creation)
# vcpu-pin: Handled by create-vms.sh script

# VirtIO console only (no disk/network for security)
serial = "pty"

# Event channels (minimal)
max_event_channels = 128

# Grant tables (minimal for console)
max_grant_frames = 4

# Power management
on_poweroff = "destroy"
on_reboot = "restart"
on_crash = "preserve"

# Real-time scheduler parameters
sched = "rt"  # RTDS scheduler
period = 10000  # 10ms period
budget = 9500   # 9.5ms budget (95% CPU)

# No PCI devices (security isolation)
pci = []

# No VFB/VNC (headless RTOS)
vfb = []

# Dom0less boot (start without dom0 control)
# This is configured in Xen device tree, not xl.cfg
# See overlays/virtio-automotive.dts

# Zephyr-specific: CAN simulator parameters
# These would be passed via device tree chosen node:
# chosen {
#     zephyr,can-bus = "vcan0";
#     zephyr,can-bitrate = <500000>;
# };

# Debugging (enable Zephyr early console)
# extra = "zephyr.log_level=4"
```
