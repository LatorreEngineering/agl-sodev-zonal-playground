```python
# AGL SoDeV - HMI VM Configuration
# PVH guest running AGL demo platform with Qt/Wayland

# Basic VM settings
name = "hmi-vm"
type = "pvh"
kernel = "/usr/local/share/agl-sodev/images/Image"
ramdisk = "/usr/local/share/agl-sodev/images/agl-hmi-rootfs.cpio.gz"

# Boot parameters
cmdline = "console=hvc0 root=/dev/vda rw rootwait ip=dhcp"

# Memory allocation (2GB)
memory = 2048
maxmem = 2048

# Virtual CPUs
vcpus = 4
cpus = "0-3"  # Use first 4 physical cores

# VirtIO devices
# Root filesystem
disk = [ 
    'format=raw,vdev=vda,access=rw,target=/usr/local/share/agl-sodev/images/agl-demo-platform-dom0.ext4'
]

# VirtIO network (NAT via dom0)
vif = [ 
    'bridge=xenbr0,mac=00:16:3e:00:00:01,model=virtio'
]

# VirtIO console (hvc0)
serial = "pty"

# VirtIO GPU for HMI rendering
vfb = [ 
    'vnc=1,vnclisten=0.0.0.0:0,vncpasswd=agl,vncdisplay=0,xres=1920,yres=1080'
]

# Event channels (for inter-VM communication)
max_event_channels = 1024

# Grant tables (for VirtIO shared memory)
max_grant_frames = 64

# Power management
on_poweroff = "destroy"
on_reboot = "restart"
on_crash = "preserve"

# VSS integration via VirtIO-vsock
# device_model_args = [
#     "-device", "vhost-vsock-pci,guest-cid=3"
# ]

# Security: No PCI passthrough (keep VM isolated)
pci = []

# Scheduler parameters (fair share)
sched = "credit2"
cap = 400  # 4 VCPUs * 100%

# Debugging
# extra = "earlyprintk=xenboot console=hvc0 loglevel=8"
```
